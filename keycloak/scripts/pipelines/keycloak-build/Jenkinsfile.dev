#!groovy

node('build-slave') {

    currentBuild.result = "SUCCESS"

    try {

      stage('Build'){
          sh('cd sunbird-auth/keycloak/scripts/ansible && ansible-playbook -i inventories/dev  keycloak.yml --tags build --vault-password-file  /run/secrets/vault-pass')
      }

      stage('Archive'){
         // archiveArtifacts 'keycloak_build/login.tar.gz'
         // archiveArtifacts 'keycloak_build.tar.gz'
      }
    }
    catch (err) {
        currentBuild.result = "FAILURE"
        throw err
    }
}
